# 📋 クリップボードマネージャー

macOS用のモダンな常駐クリップボード管理アプリです。コピーしたテキストの履歴を自動的に保存し、カテゴリとお気に入りフォルダで整理できます。

## ✨ 主要機能

### 🎯 コア機能
- **自動履歴保存**: コピーしたテキストを自動的に履歴に保存
- **メニューバーアクセス**: モダンなアイコンでメニューバーから簡単アクセス
- **カテゴリ管理**: カスタムカテゴリでテキストを分類・整理
- **お気に入りフォルダ**: 階層的なお気に入り管理システム
- **履歴管理画面**: モダンなUIで詳細な履歴管理と検索機能

### 🔧 詳細機能
- **履歴制限**: 直近50件の履歴を自動保存
- **重複除外**: 重複するテキストの自動除外
- **リアルタイム検索**: 検索機能による履歴の絞り込み
- **カテゴリ別表示**: カテゴリごとの履歴表示
- **フォルダ別表示**: お気に入りフォルダごとの表示
- **データ永続化**: UserDefaultsによる安全なデータ保存
- **モダンUI**: カードベースの美しいインターフェース

## 🚀 使用方法

### 📱 基本的な使い方
1. **アプリ起動**: アプリを起動すると、メニューバーにモダンなクリップボードアイコンが表示されます
2. **自動保存**: テキストをコピーすると、自動的に履歴に保存されます
3. **メニューアクセス**: メニューバーのアイコンをクリックすると、カテゴリ別の履歴とフォルダ別のお気に入りが表示されます
4. **再コピー**: メニューからテキストを選択すると、クリップボードに再コピーされます

### 🎛️ 履歴管理画面
1. **管理画面を開く**: メニューバーから「⚙️ 履歴を管理...」を選択
2. **履歴タブ**: コピー履歴をカテゴリ別に確認・管理
3. **お気に入りタブ**: フォルダ別にお気に入りを管理
4. **検索機能**: リアルタイム検索で履歴を絞り込み
5. **アイテム操作**: 各アイテムからコピー、お気に入り追加、カテゴリ変更、削除が可能

### 🏷️ カテゴリ管理
- **カテゴリ作成**: カスタムカテゴリを作成してテキストを分類
- **色分け**: カテゴリごとに色を設定して視覚的に区別
- **カテゴリ変更**: 既存のアイテムのカテゴリを変更可能

### 📁 お気に入りフォルダ管理
- **フォルダ作成**: カスタムフォルダを作成してお気に入りを整理
- **階層管理**: フォルダごとにお気に入りを分類
- **フォルダ変更**: お気に入りアイテムのフォルダを変更可能

## 🛠️ 技術仕様

### 🏗️ アーキテクチャ
- **Swift Package Manager**: モダンなパッケージ管理
- **AppKit + SwiftUI**: メニューバーはAppKit、管理画面はSwiftUI
- **MVVM パターン**: データ管理とUIの分離
- **ObservableObject**: リアクティブなデータバインディング
- **MainActor**: 安全なUI更新とスレッド管理

### 📁 主要クラス
- `AppDelegate`: アプリケーションのエントリーポイント
- `ClipboardManager`: クリップボード監視とメニューバー管理
- `ClipboardDataManager`: データの管理と永続化
- `ClipboardItem`: クリップボードアイテムのデータモデル
- `Category`: カテゴリのデータモデル
- `FavoriteFolder`: お気に入りフォルダのデータモデル
- `HistoryWindowController`: 履歴管理ウィンドウの制御
- `HistoryView`: 履歴管理画面のSwiftUIビュー

### 💾 データ永続化
- **UserDefaults**: 安全なデータ保存
- **Codable**: JSON形式でのエンコード・デコード
- **後方互換性**: カスタムデコーダーによる既存データとの互換性
- **エラーハンドリング**: 堅牢なデータ読み込み処理

## 🔨 環境構築とビルド

### 📋 要件
- **macOS**: 13.0以上
- **Swift**: 6.1以上
- **Swift Package Manager**: 6.1以上
- **Xcode**: 15.0以上（推奨）

### 🛠️ 環境構築手順

#### 1. Xcodeのインストール
```bash
# App StoreからXcodeをインストール
# または、Apple Developerサイトからダウンロード
```

#### 2. コマンドラインツールの設定
```bash
# Xcodeのコマンドラインツールを設定
sudo xcode-select --install

# ライセンスに同意
sudo xcodebuild -license accept

# アクティブなディレクトリを設定
sudo xcode-select -s /Applications/Xcode.app/Contents/Developer
```

#### 3. Swiftの確認
```bash
# Swiftのバージョンを確認
swift --version

# 期待される出力例:
# Swift version 6.1 (swift-6.1-RELEASE)
```

#### 4. Gitの設定（初回のみ）
```bash
# Gitの設定
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# SSH鍵の設定（GitHub使用時）
ssh-keygen -t ed25519 -C "your.email@example.com"
# 生成された公開鍵をGitHubに追加
```

### 🚀 ビルド手順

#### 1. リポジトリのクローン
```bash
# HTTPS経由でクローン
git clone https://github.com/komody/ClipboardManager.git
cd ClipboardManager

# またはSSH経由でクローン
git clone git@github.com:komody/ClipboardManager.git
cd ClipboardManager
```

#### 2. 依存関係の解決
```bash
# 依存関係を解決（このプロジェクトは外部依存なし）
swift package resolve
```

#### 3. ビルド
```bash
# デバッグビルド
swift build

# リリースビルド
swift build -c release
```

#### 4. 実行
```bash
# デバッグモードで実行
swift run

# リリースモードで実行
swift run -c release
```

### 🔧 トラブルシューティング

#### よくある問題と解決方法

**1. `xcode-select: error: tool 'xcodebuild' requires Xcode`**
```bash
# Xcodeがインストールされていない場合
# App StoreからXcodeをインストール

# または、コマンドラインツールのみの場合
sudo xcode-select --install
```

**2. `swift: command not found`**
```bash
# Swiftがインストールされていない場合
# Xcodeをインストールすると自動的にインストールされます
```

**3. ビルドエラーが発生する場合**
```bash
# キャッシュをクリア
swift package clean
swift package reset

# 再ビルド
swift build
```

**4. 権限エラーが発生する場合**
```bash
# クリップボードアクセス権限を確認
# システム環境設定 > セキュリティとプライバシー > プライバシー > アクセシビリティ
```

### 📦 配布
- アプリをビルド後、アプリケーションフォルダにコピー
- 初回起動時にクリップボードアクセス権限の許可が必要です
- メニューバーにクリップボードアイコンが表示されます

## ⚙️ カスタマイズ

### 🔧 設定可能な項目
- `maxHistoryCount`: 保存する履歴の最大件数（デフォルト: 50）
- `clipboardTimer`: クリップボード監視の間隔（デフォルト: 1.0秒）
- `categoryColors`: カテゴリの色設定
- `folderColors`: お気に入りフォルダの色設定

### 🚀 拡張のアイデア
- **ドラッグ&ドロップ**: ファイルや画像の履歴管理
- **キーボードショートカット**: グローバルホットキー対応
- **クラウド同期**: iCloud連携による複数デバイス同期
- **テーマカスタマイズ**: ダークモード対応
- **プラグインシステム**: 拡張機能の追加

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## ⚠️ 注意事項

- **プライバシー**: このアプリはクリップボードの内容を監視します
- **機密情報**: 機密情報を含むテキストをコピーする際は注意してください
- **データ保存**: すべてのデータはローカルに保存され、外部に送信されません
- **終了方法**: アプリを終了するには、メニューバーから「🚪 終了」を選択してください

## 📊 プロジェクト情報

- **開発言語**: Swift 6.1
- **UI フレームワーク**: SwiftUI + AppKit
- **パッケージ管理**: Swift Package Manager
- **データ永続化**: UserDefaults
- **アーキテクチャ**: MVVM + ObservableObject

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します。詳細は[調査レポート.md](./調査レポート.md)をご覧ください。

